<html ng-app="app">
  <div class="container">
    <div class="row">
      <main role="main" class="col-md-10 ml-sm-auto col-lg-12">
        <div class="d-flex flex-wrap flex-md-nowrap align-items-center pt-1 pb-1 mb-2">                
          <a href="javascript:window.history.go(-1)" 
            class="fa fa-arrow-left pt-1 pb-1 mb-2" 
            style="font-size:30px;color:gray">
          </a>          
          <h3 class="breadcrumb-item active">&ensp;Novo Cálculo de Corrente</h3>
        </div>
        <form>
            <div class="form-group">
                <label for="descricao" class="required">Aparelho</label>
                <select 
                    ng-class="{'is-invalid': vm.error.aparelho && !vm.cadastro.aparelho}" 
                    ng-options="item as item.descricao for item in vm.aparelhos track by item.id"            
                    ng-model="vm.cadastro.aparelho" 
                    class="form-control"
                    ng-class="{'is-invalid' : vm.error.aparelho && !vm.cadastro.aparelho}">
                </select>
                <small ng-if="vm.error.aparelho && !vm.cadastro.aparelho" class="invalid-feedback">
                    {{vm.error.aparelho[1]}}
                </small>
            </div>

            <div class="form-row">
                <div class="form-group col-md-6">
                  <label for="potencia">Potência</label>
                  <div class="input-group mb-2">
                      <div class="input-group-prepend">
                        <div class="input-group-text">W</div>
                      </div>
                      <input ng-model="vm.cadastro.aparelho.potencia"
                              ui-number-mask
                              type="text" 
                              class="form-control" 
                              name="potencia"
                              ng-disabled="true">
                    </div>
                </div>
                <div class="form-group col-md-6">
                  <label for="tensao">Tensão</label>
                  <div class="input-group mb-2">
                      <div class="input-group-prepend">
                        <div class="input-group-text">V</div>
                      </div>
                      <input ng-model="vm.cadastro.aparelho.tensao"
                              ui-number-mask
                              type="text" 
                              class="form-control" 
                              name="tensao"
                              ng-disabled="true">
                    </div>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-6">
                  <label for="distancia">Distância</label>
                  <div class="input-group mb-2">
                      <div class="input-group-prepend">
                        <div class="input-group-text">mts</div>
                      </div>
                      <input ng-model="vm.cadastro.distancia"
                              ui-number-mask
                              type="text" 
                              class="form-control" 
                              name="distancia">
                  </div>
                </div>
                <div class="form-group col-md-6">
                  <label for="quedaTensao">Queda tensão</label>
                  <input ng-model="vm.cadastro.quedaTensao"
                          ui-number-mask
                          type="text" 
                          class="form-control" 
                          name="quedaTensao">
                </div>                
            </div>
            <div class="form-row">
                <div class="form-group col-md-6">
                    <label for="corrente" class="required">Corrente Máxima</label>
                    <div class="input-group mb-2">
                        <div class="input-group-prepend">
                          <div class="input-group-text">Ah</div>
                        </div>
                        <input ng-model="vm.cadastro.corrente"
                                ui-number-mask
                                type="text" 
                                class="form-control" 
                                name="corrente"
                                ng-disabled="true"
                                ng-class="{'is-invalid' : vm.error.corrente && !vm.cadastro.corrente}">
                              <small ng-if="vm.error.corrente && !vm.cadastro.corrente" class="invalid-feedback">
                                  {{vm.error.corrente[1]}}
                              </small>
                    </div>
                </div>
            </div>
            <div class="form-row justify-content-end">
              <button ng-click="vm.calcular(vm.cadastro)" 
                      type="button" 
                      class="btn btn-outline-primary mr-2">Calcular
              </button>
              <button ng-click="vm.salvar()" 
                      ng-disabled="!vm.cadastro.corrente" 
                      type="button" 
                      class="btn btn-outline-success mr-2">Salvar Cálculo
              </button>
              <a ui-sref="calculoCorrenteList" class="btn btn-outline-danger">Cancelar</a>
            </div>
          </form>
          
      </main>
    </div>
  </div>
</html>
